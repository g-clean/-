# 等时圈生成系统

基于高德地图API的等时圈（Isochrone）生成工具，支持步行、驾车、公交等多种交通方式的可达性分析。

## 功能特性

- 支持多种交通方式（步行、驾车、公交）
- 可视化等时圈边界
- 批量生成多个设施点的等时圈
- 实时进度显示
- 支持清除和重新计算
- 完善的错误处理机制

## 使用说明

1. 获取高德地图API密钥
   - 访问[高德开放平台](https://lbs.amap.com/)
   - 注册账号并创建应用
   - 获取JavaScript API密钥

2. 配置项目
   - 打开`index.html`文件
   - 在文件顶部的「🔑 API密钥配置区域」中，将`AMAP_API_KEY`的值替换为您的API密钥
   ```javascript
   // 高德地图API密钥 - 请替换为您自己的密钥
   const AMAP_API_KEY = "您的API密钥";
   ```
   
3. 使用方法
   - 在浏览器中打开`index.html`
   - 通过以下方式选择设施点：
     * 直接点击地图上的位置
     * 手动输入经纬度坐标（格式：经度,纬度）
   - 设置通行时间（1-120分钟）
   - 选择交通方式（驾车/步行/骑行）
   - 点击"生成等时圈"按钮

## 技术实现

- 使用高德地图JavaScript API V2.0
- 采用ES6模块化开发
- 使用Promise处理异步操作
- 实现了二分查找算法来确定等时圈边界点
- 使用多边形绘制等时圈范围

## 注意事项

1. 确保有可用的网络连接
2. API密钥需要设置正确的安全域名
3. 路径规划服务可能受到网络状况影响
4. 可通过增加等时圈计算的角度数量、降低搜索步长和增加二分查找次数以提高获取数据精度(但api调用量会增加)
5. 建议在实际使用前进行充分测试

## 更新日志

### 2025-6-16 v1.0.0 (初始版本)
- **等时圈生成功能**: 基于高德地图API实现多种交通方式的等时圈生成
  - 支持驾车、步行、骑行、公交四种交通方式
  - 实现了基于二分搜索的边界点计算算法
  - 集成中位数优化算法，有效减少因路径规划异常导致的等时圈范围缩小问题
- **API密钥统一管理**: 提供便捷的API密钥配置方式
  - 在`index.html`文件顶部设置专门的「🔑 API密钥配置区域」
  - 支持同时配置主密钥(`AMAP_API_KEY`)和安全密钥(`AMAP_SECURITY_JS_CODE`)
  - 动态构建高德地图API脚本URL，确保密钥配置的一致性
- **代码架构**: 采用模块化设计的IsochroneManager类
  - 包含完整的搜索配置管理、交通方式标准化、点可达性测试等功能模块
  - 实现了统一的错误处理机制和进度更新机制
  - 提供了灵活的延迟控制和颜色分配逻辑
- **用户界面**: 简洁直观的Web界面
  - 支持地图点击选择起点
  - 提供交通方式选择和时间设置
  - 实时显示生成进度和结果
- **技术特性**: 
  - 使用Haversine公式精确计算两点间直线距离
  - 优化的搜索步长(1000m)确保所有方向搜索的一致性
  - 完善的异常处理机制，提高程序稳定性

## 许可证

本项目仅供学习和研究使用。